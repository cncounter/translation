# Java多线程与并发面试题

[TOC]


## 1. 线程基础


### 1.1 什么是线程?

线程(Thread)就是程序代码执行的一条线, 在Java代码层面看来, 是一个方法调用另一个方法，依次排列的方法调用链。

当然，线程是操作系统中的概念，被称为轻量级的进程，是分配CPU资源和调度执行的基本单位。


### 1.2 什么是进程?

进程(Processe)是操作系统中的概念，是应用程序的一次动态执行过程，操作系统会给他分配各种资源，比如内存，文件，以及CPU资源。

每个进程都有自己的内存空间，相对于静态的应用程序二进制代码来说，这个虚拟内存地址空间就是一个副本。

比如，我们用命令行启动一次Java程序，就说启动了一个JVM进程。


### 1.3 线程与进程有什么区别?

一般来说，进程中可以包含多个线程，这些线程共享一块内存地址空间。
在Linux系统中，线程和进程概念并没有严格区分。

粗略来看，它们的区别有：

线程被称为轻量级的进程，线程之间的切换开销更小，线程占用的资源比进程少。
进程之间是独立的，不能共享内存地址空间；【Linux的轻量级进程我们当做线程来看即可】


### 1.4 Java中怎么创建线程?

Java语言中创建线程本质上只有一种方式: `new Thread()`。 启动线程则是调用 `start()` 方法。

Java中,继承 Thread 类,实现 Runnable 接口,实现 Callable 接口, 这些方式创建的都是可执行任务，并没有真正地创建线程。


### 1.5  `Thread#start()` 和 `Thread#run()` 方法有什么区别？

- `Thread#start()`: 启动一个新线程并异步执行其中的任务。
- `Thread#run()`: 在当前线程执行，和调用其他对象的普通方法没什么区别。


### 1.6 Thread类与Runnable接口有什么关系?

Thread类继承了Runnable接口，创建线程对象时，可以传入需要执行的 Runnable 任务。


### 1.7 Runnable 与 Callable 接口有什么区别？

- `Runnable#run()` 没有返回值
- `Callable#call()` 方法有返回值


### 1.8 线程有哪些状态?

Thread的状态包括:

- NEW：初始状态, 尚未启动
- RUNNABLE: 可运行状态
- RUNNING: 运行中
- READY: 就绪状态
- WAITING: 等待状态
- TIMED_WAITING: 限时等待被唤醒的状态
- BLOCKED: 阻塞状态,被对象锁或者IO阻塞
- TERMINATED: 终止状态


### 1.9 什么是守护线程？与前台线程的区别在哪里?


守护线程(Daemon Thread)也叫后台线程。

在JVM中，如果没有正在运行中的前台线程，则JVM就会自动结束运行，而不管守护线程。 所以守护线程一般用于执行某些可以被放弃的任务或事件。


### 1.10 `Thread.sleep(0)` 与 `TimeUnit.MILLISECONDS.sleep(0)` 有什么不同?

`TimeUnit.MILLISECONDS.sleep(0)` 没有效果，因为数值 `0` 会被过滤掉。

两种方法都可以实现线程休眠，让出CPU资源。

`Thread.sleep(0L)` 的用处是先让出CPU资源，然后再让操作系统进行调度，和 `Thread.yield()` 类似。

`TimeUnit.MILLISECONDS.sleep()` 方法是对 `Thread.sleep()` 的快捷封装。
